import subprocess #for running scripts
import time #for timer
import ftplib #for FTP connection

send_to_internet=false

subprocess.call("sudo /etc/init.d/ntp stop", shell=True)
subprocess.call("sudo ntpd -q -g", shell=True)
subprocess.call("sudo /etc/init.d/ntp start", shell=True) #to syncronize time between the Raspberry Pis

session = ftplib.FTP('198.196.0.11','anonymous','') #Use online FTP server information

t2=time.time()

while(true)
	if(send_to_internet=true)
		t2=time.time()
		send_to_internet=false

	t1=time.time() #records time in seconds
	
	while((t1-time.time())<=10) #collect data every 10 seconds
		subprocess.call(["IMU.py",shell=True])
		t1=time.time();
	
	if((time.time())-t2>60)
		file = open('data_file_subsurface','rb')                  # file to send
		session.storbinary('STOR data_file_subsurface', file)     # send the file
		file.close()               				  # close file and FTP
		file = open('data_file_surface','rb')                  # file to send
		session.storbinary('STOR data_file_surface', file)     # send the file
		file.close()                                    	  # close file and FTP 
		send_to_internet=true
		
		
	
	

	
	
		
