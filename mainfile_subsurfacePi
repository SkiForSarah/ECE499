import subprocess #for running scripts
import time #for timer
import ftplib #for FTP connection

session = ftplib.FTP('192.168.0.11','anonymous','')

subprocess.call("sudo /etc/init.d/ntp stop", shell=True)
subprocess.call("sudo ntpd -q -g", shell=True)
subprocess.call("sudo /etc/init.d/ntp start", shell=True) #to syncronize time between the Raspberry Pis

while True:

	t1=time.time() #records time in seconds
	
	while((time.time()-t1)<=10) #collect data for 10 seconds
		subprocess.call("python IMU.py",shell=True)
		
	####ADD DSP CODE HERE TO FILTER DATA###
    	####THIS SHOWS POSITION DATA AND THEN COMBINED WITH UTM DATA TO HELP ACCURACY###
    
	file = open('subsurface_data.csv','rb')                  # file to send
	session.storbinary('subsurface_data.csv', file)     	 # send the file
	file.close()                                    	 # close file and FTP 
